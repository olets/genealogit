# !/bin/bash

if [[ $# < 2 ]]; then
	printf "Every record must have at least ID and Name\\n"
	return
fi

name="$1"
id="$2"
ref=$(git rev-parse --abbrev-ref HEAD)
if [[ $ref == 'HEAD' ]]; then
	ref=$(git rev-parse HEAD)
fi
# echo $name
# echo $id
# echo
echo checking for branch "$id"
if [[ -n $(git branch | grep -w "$id") ]]; then
	git checkout "$id"
	git commit --no-gpg-sign --allow-empty -m "$name"
	git replace @~ @
else
	git checkout --orphan="$id"
	git commit --no-gpg-sign --allow-empty -m "$name"
fi
git checkout $ref
# echo
